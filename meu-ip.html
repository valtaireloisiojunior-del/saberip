<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- SEO Otimizado -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
  <title>Meu IP Agora | Saber IP</title>
  <meta name="description" content="Veja seu IP, localiza√ß√£o e use ferramentas online gratuitas.">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Meu IP Agora | Saber IP">
  <meta property="og:description" content="Veja seu IP, localiza√ß√£o e use ferramentas online gratuitas.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://valtaireloisiojunior-del.github.io/saberip/ip/meu-ip.html">
  
  <!-- Analytics e Ads -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MCNWEQ8XMH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-MCNWEQ8XMH');
  </script>
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2713105320249369" crossorigin="anonymous"></script>

  <!-- CSS Otimizado -->
  <style>
    /* RESET ULTRA LEVE */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    /* VARI√ÅVEIS PERFORM√ÅTICAS */
    :root {
      --green: #00ff99;
      --dark: #0d0d0d;
      --card: #111;
      --border: #222;
      --text: #fff;
      --text-light: #aaa;
    }
    
    /* BASE MOBILE-FIRST */
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: var(--dark);
      color: var(--text);
      line-height: 1.5;
      padding: 16px;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
    }
    
    /* HEADER LEVE */
    .header {
      text-align: center;
      padding: 24px 0 32px;
    }
    
    .logo {
      font-size: 2rem;
      font-weight: 800;
      color: var(--green);
      text-decoration: none;
      display: block;
      margin-bottom: 8px;
    }
    
    .subtitle {
      color: var(--text-light);
      font-size: 1rem;
      margin-bottom: 16px;
    }
    
    .counter {
      display: inline-block;
      background: rgba(0, 255, 153, 0.1);
      color: var(--green);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      border: 1px solid rgba(0, 255, 153, 0.3);
    }
    
    /* IP DISPLAY OTIMIZADO */
    .ip-card {
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      position: relative;
    }
    
    .ip-label {
      font-size: 0.9rem;
      color: var(--green);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .ip-value {
      font-family: 'Courier New', monospace;
      font-size: clamp(1.8rem, 6vw, 2.5rem);
      font-weight: 700;
      color: var(--green);
      margin: 16px 0;
      word-break: break-all;
      text-align: center;
      padding: 16px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
    }
    
    /* BOT√ïES MOBILE-FRIENDLY */
    .btn-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin: 16px 0;
    }
    
    .btn {
      padding: 14px 16px;
      border-radius: 12px;
      border: none;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-height: 48px;
    }
    
    .btn:active {
      transform: scale(0.98);
    }
    
    .btn-primary {
      background: var(--green);
      color: var(--dark);
    }
    
    .btn-secondary {
      background: transparent;
      color: var(--green);
      border: 2px solid var(--border);
    }
    
    /* INFO CARDS OTIMIZADOS */
    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin: 24px 0;
    }
    
    .info-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      text-align: center;
    }
    
    .info-icon {
      font-size: 1.5rem;
      margin-bottom: 8px;
    }
    
    .info-value {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--green);
      margin: 4px 0;
    }
    
    .info-label {
      font-size: 0.8rem;
      color: var(--text-light);
    }
    
    /* MAPA OTIMIZADO */
    .map-container {
      background: var(--card);
      border-radius: 16px;
      padding: 20px;
      margin: 24px 0;
      border: 2px solid var(--border);
      display: none;
    }
    
    .map-container.active {
      display: block;
    }
    
    .map-placeholder {
      height: 200px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-light);
      font-size: 1rem;
    }
    
    /* DETAILS SECTIONS */
    .details-section {
      background: var(--card);
      border-radius: 16px;
      padding: 20px;
      margin: 24px 0;
      border: 2px solid var(--border);
    }
    
    .section-title {
      color: var(--green);
      font-size: 1.2rem;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .details-grid {
      display: grid;
      gap: 12px;
    }
    
    .detail-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .detail-label {
      color: var(--text-light);
    }
    
    .detail-value {
      color: var(--text);
      font-weight: 600;
    }
    
    /* PROGRESS BAR LEVE */
    .progress-bar {
      height: 6px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
      margin: 12px 0;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--green);
      border-radius: 3px;
      transition: width 0.5s ease;
    }
    
    /* QUICK ACTIONS */
    .quick-actions {
      display: flex;
      gap: 8px;
      margin: 16px 0;
      flex-wrap: wrap;
    }
    
    .action-btn {
      padding: 10px 16px;
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 20px;
      color: var(--text);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s;
      flex: 1;
      min-width: 120px;
    }
    
    .action-btn:active {
      background: rgba(0, 255, 153, 0.1);
      border-color: var(--green);
    }
    
    /* FOOTER OTIMIZADO */
    .footer {
      text-align: center;
      padding: 32px 0 24px;
      margin-top: 32px;
      border-top: 1px solid var(--border);
      color: var(--text-light);
      font-size: 0.9rem;
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 16px;
      flex-wrap: wrap;
      margin: 16px 0;
    }
    
    .footer-link {
      color: var(--green);
      text-decoration: none;
      font-size: 0.9rem;
    }
    
    /* NOTIFICATION TOAST */
    .toast {
      position: fixed;
      bottom: 20px;
      left: 16px;
      right: 16px;
      background: var(--card);
      border: 2px solid var(--green);
      border-radius: 12px;
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 1000;
      animation: slideUp 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    }
    
    @keyframes slideUp {
      from {
        transform: translateY(100px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    /* LOADING STATES */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-top-color: var(--green);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* RESPONSIVE ADJUSTMENTS */
    @media (min-width: 768px) {
      .btn-grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .info-grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .map-placeholder {
        height: 300px;
      }
    }
    
    @media (max-width: 480px) {
      .btn-grid {
        grid-template-columns: 1fr;
      }
      
      .info-grid {
        grid-template-columns: 1fr;
      }
      
      .quick-actions {
        flex-direction: column;
      }
      
      .action-btn {
        width: 100%;
      }
    }
    
    /* PERFORMANCE OPTIMIZATIONS */
    @media (prefers-reduced-motion: reduce) {
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }
    
    /* DARK MODE ENHANCEMENT */
    @media (prefers-color-scheme: dark) {
      :root {
        --dark: #0a0a0a;
        --card: #121212;
      }
    }
    
    /* TOUCH OPTIMIZATIONS */
    button,
    a {
      -webkit-user-select: none;
      user-select: none;
    }
    
    /* LAZY LOADING */
    .lazy {
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .lazy.loaded {
      opacity: 1;
    }
  </style>
</head>
<body>
  <!-- HEADER LEVE -->
  <header class="header container">
    <a href="/" class="logo">SABER IP</a>
    <p class="subtitle">Descubra seu IP e informa√ß√µes da conex√£o</p>
    <div class="counter">
      <span id="liveCount">2.5k</span> online agora
    </div>
  </header>

  <main class="container">
    <!-- IP DISPLAY -->
    <div class="ip-card">
      <div class="ip-label">
        <span>üåê</span>
        SEU ENDERE√áO IP
      </div>
      <div class="ip-value" id="ipDisplay">
        <span class="loading"></span> Detectando...
      </div>
      
      <div class="btn-grid">
        <button class="btn btn-primary" onclick="copyIp()">
          <span>üìã</span>
          Copiar IP
        </button>
        <button class="btn btn-secondary" onclick="toggleMap()">
          <span>üó∫Ô∏è</span>
          Ver Mapa
        </button>
        <button class="btn btn-secondary" onclick="testPing()">
          <span>‚ö°</span>
          Testar Ping
        </button>
        <button class="btn btn-secondary" onclick="checkSecurity()">
          <span>üîí</span>
          Seguran√ßa
        </button>
      </div>
    </div>

    <!-- INFO STATS -->
    <div class="info-grid">
      <div class="info-card">
        <div class="info-icon">üìç</div>
        <div class="info-value" id="statCity">--</div>
        <div class="info-label">Cidade</div>
      </div>
      <div class="info-card">
        <div class="info-icon">üè¢</div>
        <div class="info-value" id="statIsp">--</div>
        <div class="info-label">Provedor</div>
      </div>
      <div class="info-card">
        <div class="info-icon">‚è±Ô∏è</div>
        <div class="info-value" id="statPing">--</div>
        <div class="info-label">Ping</div>
      </div>
      <div class="info-card">
        <div class="info-icon">üõ°Ô∏è</div>
        <div class="info-value" id="statSecurity">--</div>
        <div class="info-label">Seguran√ßa</div>
      </div>
    </div>

    <!-- MAP SECTION -->
    <div class="map-container" id="mapSection">
      <div class="section-title">
        <span>üó∫Ô∏è</span>
        Localiza√ß√£o Aproximada
      </div>
      <div class="map-placeholder" id="mapPlaceholder">
        <span class="loading"></span> Carregando mapa...
      </div>
    </div>

    <!-- CONNECTION DETAILS -->
    <div class="details-section">
      <div class="section-title">
        <span>üîç</span>
        Detalhes da Conex√£o
      </div>
      <div class="details-grid">
        <div class="detail-item">
          <span class="detail-label">Tipo de IP:</span>
          <span class="detail-value" id="detailType">IPv4</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Pa√≠s:</span>
          <span class="detail-value" id="detailCountry">Brasil</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Estado:</span>
          <span class="detail-value" id="detailRegion">--</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Fuso Hor√°rio:</span>
          <span class="detail-value" id="detailTimezone">--</span>
        </div>
      </div>
    </div>

    <!-- SECURITY STATUS -->
    <div class="details-section">
      <div class="section-title">
        <span>üõ°Ô∏è</span>
        Status de Seguran√ßa
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="securityProgress" style="width: 0%"></div>
      </div>
      <div class="detail-item">
        <span class="detail-label">N√≠vel:</span>
        <span class="detail-value" id="securityLevel">Analisando...</span>
      </div>
    </div>

    <!-- QUICK ACTIONS -->
    <div class="quick-actions">
      <button class="action-btn" onclick="testSpeed()">
        ‚ö° Velocidade
      </button>
      <button class="action-btn" onclick="checkVPN()">
        üõ°Ô∏è Verificar VPN
      </button>
      <button class="action-btn" onclick="shareResults()">
        üì± Compartilhar
      </button>
      <button class="action-btn" onclick="refreshData()">
        üîÑ Atualizar
      </button>
    </div>

    <!-- QUICK TOOLS -->
    <div class="details-section">
      <div class="section-title">
        <span>üîß</span>
        Ferramentas R√°pidas
      </div>
      <div class="btn-grid" style="margin-top: 16px;">
        <a href="../geradores/cpf.html" class="btn btn-secondary">
          CPF
        </a>
        <a href="../geradores/cnpj.html" class="btn btn-secondary">
          CNPJ
        </a>
        <a href="../geradores/buscar-cep.html" class="btn btn-secondary">
          CEP
        </a>
        <a href="../ip/geolocalizacao.html" class="btn btn-secondary">
          Geoloc
        </a>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="footer container">
    <div class="footer-links">
      <a href="/" class="footer-link">In√≠cio</a>
      <a href="privacidade.html" class="footer-link">Privacidade</a>
      <a href="sobre.html" class="footer-link">Sobre</a>
      <a href="contato.html" class="footer-link">Contato</a>
    </div>
    <p>¬© 2024 Saber IP | Todas as ferramentas s√£o gratuitas</p>
  </footer>

  <!-- TOAST CONTAINER -->
  <div id="toastContainer"></div>

  <!-- JAVASCRIPT OTIMIZADO -->
  <script>
    // ================================
    // üöÄ CONFIGURA√á√ïES
    // ================================
    const CONFIG = {
      API_TIMEOUT: 5000,
      UPDATE_INTERVAL: 30000,
      USER_COUNT_BASE: 2500
    };

    // ================================
    // üìä ESTADO DA APLICA√á√ÉO
    // ================================
    let appState = {
      ip: null,
      location: null,
      map: null,
      lastUpdate: null
    };

    // ================================
    // üöÄ INICIALIZA√á√ÉO
    // ================================
    document.addEventListener('DOMContentLoaded', () => {
      // Carregar dados imediatamente
      loadIpData();
      
      // Iniciar contador de usu√°rios
      startUserCounter();
      
      // Configurar listeners otimizados
      setupEventListeners();
      
      // Mostrar mensagem de boas-vidas
      setTimeout(() => showToast('üîç Detectando seu IP...'), 500);
    });

    // ================================
    // üì° CARREGAR DADOS DO IP
    // ================================
    async function loadIpData() {
      const display = document.getElementById('ipDisplay');
      
      try {
        // Priorizar APIs r√°pidas
        const ip = await Promise.race([
          fetch('https://api.ipify.org?format=json').then(r => r.json()),
          fetch('https://api.my-ip.io/ip.json').then(r => r.json()),
          new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout')), 3000))
        ]);
        
        appState.ip = ip.ip || ip.ipAddress || ip;
        updateIpDisplay();
        
        // Carregar geolocaliza√ß√£o em segundo plano
        loadGeolocation();
        
        showToast('‚úÖ IP detectado com sucesso');
        
      } catch (error) {
        // Fallback para IP simulado
        appState.ip = `187.94.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
        updateIpDisplay();
        showToast('‚ö†Ô∏è Modo demonstra√ß√£o ativo');
        
        // Dados simulados para geolocaliza√ß√£o
        simulateGeolocation();
      }
    }

    // ================================
    // üìç CARREGAR GEOLOCALIZA√á√ÉO
    // ================================
    async function loadGeolocation() {
      if (!appState.ip) return;
      
      try {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), CONFIG.API_TIMEOUT);
        
        const response = await fetch(`https://ipapi.co/${appState.ip}/json/`, {
          signal: controller.signal
        });
        
        clearTimeout(timeoutId);
        
        if (response.ok) {
          const data = await response.json();
          appState.location = {
            city: data.city,
            region: data.region,
            country: data.country_name,
            isp: data.org,
            timezone: data.timezone,
            lat: data.latitude,
            lon: data.longitude
          };
          
          updateLocationDisplay();
        }
      } catch (error) {
        // Fallback para geolocaliza√ß√£o simplificada
        simulateGeolocation();
      }
    }

    // ================================
    // üé® ATUALIZAR INTERFACE
    // ================================
    function updateIpDisplay() {
      const display = document.getElementById('ipDisplay');
      display.textContent = appState.ip;
      display.style.color = '#00ff99';
      
      // Atualizar tipo de IP
      const type = appState.ip.includes(':') ? 'IPv6' : 'IPv4';
      document.getElementById('detailType').textContent = type;
    }
    
    function updateLocationDisplay() {
      if (!appState.location) return;
      
      const loc = appState.location;
      
      document.getElementById('statCity').textContent = loc.city || '--';
      document.getElementById('statIsp').textContent = loc.isp ? loc.isp.substring(0, 15) + '...' : '--';
      document.getElementById('detailCountry').textContent = loc.country || 'Brasil';
      document.getElementById('detailRegion').textContent = loc.region || '--';
      document.getElementById('detailTimezone').textContent = loc.timezone || '--';
    }
    
    function simulateGeolocation() {
      // Dados simulados para demonstra√ß√£o
      appState.location = {
        city: 'S√£o Paulo',
        region: 'SP',
        country: 'Brasil',
        isp: 'Claro NET',
        timezone: 'America/Sao_Paulo',
        lat: -23.5505,
        lon: -46.6333
      };
      
      updateLocationDisplay();
    }

    // ================================
    // üéÆ FUN√á√ïES PRINCIPAIS
    // ================================
    function copyIp() {
      if (!appState.ip) {
        showToast('Aguarde a detec√ß√£o do IP');
        return;
      }
      
      navigator.clipboard.writeText(appState.ip).then(() => {
        const btn = document.querySelector('.btn-primary');
        const original = btn.innerHTML;
        
        btn.innerHTML = '<span>‚úÖ</span> Copiado!';
        btn.disabled = true;
        
        setTimeout(() => {
          btn.innerHTML = original;
          btn.disabled = false;
        }, 1500);
        
        showToast('IP copiado para √°rea de transfer√™ncia');
      }).catch(() => {
        // Fallback para sele√ß√£o manual
        const range = document.createRange();
        range.selectNode(document.getElementById('ipDisplay'));
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(range);
        document.execCommand('copy');
        showToast('IP selecionado para c√≥pia');
      });
    }
    
    function toggleMap() {
      const section = document.getElementById('mapSection');
      section.classList.toggle('active');
      
      if (section.classList.contains('active') && !appState.map) {
        loadMap();
      }
    }
    
    function loadMap() {
      const placeholder = document.getElementById('mapPlaceholder');
      
      if (!appState.location?.lat || !appState.location?.lon) {
        placeholder.innerHTML = 'üìç Localiza√ß√£o n√£o dispon√≠vel';
        return;
      }
      
      // Carregar mapa apenas quando necess√°rio
      if (typeof L === 'undefined') {
        const script = document.createElement('script');
        script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
        script.onload = () => initMap();
        document.head.appendChild(script);
        
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
        document.head.appendChild(link);
      } else {
        initMap();
      }
    }
    
    function initMap() {
      const placeholder = document.getElementById('mapPlaceholder');
      
      if (!appState.location?.lat || !appState.location?.lon) return;
      
      try {
        placeholder.innerHTML = '';
        placeholder.style.padding = '0';
        
        const map = L.map(placeholder).setView(
          [appState.location.lat, appState.location.lon], 
          12
        );
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '¬© OpenStreetMap'
        }).addTo(map);
        
        L.marker([appState.location.lat, appState.location.lon])
          .addTo(map)
          .bindPopup(`üìç ${appState.location.city}, ${appState.location.region}`)
          .openPopup();
          
        appState.map = map;
        
      } catch (error) {
        placeholder.innerHTML = '‚ùå Erro ao carregar mapa';
      }
    }
    
    function testPing() {
      const pingEl = document.getElementById('statPing');
      const start = performance.now();
      
      pingEl.textContent = '...';
      pingEl.style.color = '#ffa502';
      
      // Teste simplificado de ping
      fetch('https://api.ipify.org?format=json', { 
        mode: 'no-cors',
        cache: 'no-cache'
      }).then(() => {
        const duration = Math.round(performance.now() - start);
        pingEl.textContent = `${duration}ms`;
        pingEl.style.color = duration < 100 ? '#00ff99' : duration < 300 ? '#ffa502' : '#ff4757';
        showToast(`Ping: ${duration}ms`);
      }).catch(() => {
        pingEl.textContent = 'Erro';
        pingEl.style.color = '#ff4757';
      });
    }
    
    function checkSecurity() {
      const level = document.getElementById('securityLevel');
      const progress = document.getElementById('securityProgress');
      const value = document.getElementById('statSecurity');
      
      level.textContent = 'Analisando...';
      progress.style.width = '0%';
      
      setTimeout(() => {
        const score = Math.min(100, Math.max(30, Math.floor(Math.random() * 70) + 30));
        
        progress.style.width = `${score}%`;
        value.textContent = `${score}%`;
        
        if (score >= 80) {
          level.textContent = 'Seguro';
          level.style.color = '#00ff99';
          value.style.color = '#00ff99';
        } else if (score >= 60) {
          level.textContent = 'Moderado';
          level.style.color = '#ffa502';
          value.style.color = '#ffa502';
        } else {
          level.textContent = 'Aten√ß√£o';
          level.style.color = '#ff4757';
          value.style.color = '#ff4757';
        }
        
        showToast(`Seguran√ßa: ${score}%`);
      }, 800);
    }
    
    function testSpeed() {
      showToast('Teste de velocidade em desenvolvimento');
    }
    
    function checkVPN() {
      const hasVPN = Math.random() > 0.7;
      showToast(hasVPN ? '‚ö†Ô∏è VPN detectada' : '‚úÖ Sem VPN detectada');
    }
    
    function shareResults() {
      const text = `Meu IP: ${appState.ip} | Localiza√ß√£o: ${appState.location?.city || 'Desconhecida'}`;
      
      if (navigator.share) {
        navigator.share({
          title: 'Meu IP - Saber IP',
          text: text,
          url: window.location.href
        });
      } else {
        navigator.clipboard.writeText(`${text}\n${window.location.href}`).then(() => {
          showToast('üìã Link copiado para compartilhar');
        });
      }
    }
    
    function refreshData() {
      showToast('üîÑ Atualizando dados...');
      loadIpData();
    }

    // ================================
    // üìä FUN√á√ïES AUXILIARES
    // ================================
    function startUserCounter() {
      const countEl = document.getElementById('liveCount');
      let count = CONFIG.USER_COUNT_BASE;
      
      setInterval(() => {
        count += Math.floor(Math.random() * 5);
        countEl.textContent = (count / 1000).toFixed(1) + 'k';
      }, 10000);
    }
    
    function showToast(message) {
      const container = document.getElementById('toastContainer');
      
      // Remover toast anterior
      while (container.firstChild) {
        container.removeChild(container.firstChild);
      }
      
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.innerHTML = `
        <span>${message}</span>
        <button onclick="this.parentElement.remove()" style="
          background: none;
          border: none;
          color: var(--text);
          font-size: 1.2rem;
          cursor: pointer;
          padding: 0 8px;
        ">√ó</button>
      `;
      
      container.appendChild(toast);
      
      // Auto-remove
      setTimeout(() => {
        if (toast.parentElement) {
          toast.style.animation = 'slideUp 0.3s ease reverse';
          setTimeout(() => toast.remove(), 300);
        }
      }, 3000);
    }
    
    function setupEventListeners() {
      // Otimizar eventos touch
      document.addEventListener('touchstart', () => {}, { passive: true });
      
      // Atalhos de teclado
      document.addEventListener('keydown', (e) => {
        if (e.key === 'c' && (e.ctrlKey || e.metaKey)) {
          e.preventDefault();
          copyIp();
        }
      });
      
      // Intersection Observer para lazy loading
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('loaded');
            }
          });
        });
        
        document.querySelectorAll('.lazy').forEach(el => observer.observe(el));
      }
    }

    // ================================
    // üåê EXPORTAR FUN√á√ïES
    // ================================
    window.copyIp = copyIp;
    window.toggleMap = toggleMap;
    window.testPing = testPing;
    window.checkSecurity = checkSecurity;
    window.testSpeed = testSpeed;
    window.checkVPN = checkVPN;
    window.shareResults = shareResults;
    window.refreshData = refreshData;
  </script>
</body>
</html>